<div style="padding: 10px; padding-top: 60px;">

<md-content style="background-color: white; box-shadow: 0px 0px 1px grey; margin-bottom: 5%;">
    <md-tabs md-dynamic-height md-border-bottom >
      <md-tab label="Auditoria de Solicitudes">
        <md-content class="" style="background: linear-gradient(white, white);">

          <div class="row" style="padding-left: 15px; padding-right: 15px;">
            <table class="table table-hover table-bordered" style="margin-bottom: 0px;">
              <thead>
                <tr style="background-color: white; color: white;">
                  <td>
                    <input type="text" class="form-control" ng-model="filtro.afiliado.nombre" placeholder="Filtrar por nombre.." style="background-color: transparent; border-radius: 0px; color: #337ab7; font-weight: bold;">
                  </td>
                  <td>
                    <input type="text" class="form-control" ng-model="filtro.climed.nombre" placeholder="Filtrar por clínica.." style="background-color: transparent; border-radius: 0px; color: #337ab7; font-weight: bold;">
                  </td>
                  <td>
                    <input type="date" class="form-control" ng-model="filtro.fecha">
                  </td>
                  <td style="width: 18%;">
                    <button type="button" class="Boton Brand" style="width: 100%;"><i class="fa fa-filter"></i> LIMPIAR FILTROS</button>
                  </td>
                </tr>
                <tr style="color: #1E4599; background-color: #f5f5f5; text-align: center; vertical-align: middle;">
                  <td>
                    AFILIADO
                  </td>
                  <td>
                    CLÍNICA/MÉDICO
                  </td>
                  <td>
                    FECHA
                  </td>
                  <td style="width: 18%;">

                  </td>
                </tr>
              </thead>
              <tbody>

                <tr>
                  <td colspan="6" style="color: #337ab7;" ng-if="solicitudes == undefined"> <i class="fa fa-circle-o-notch fa-spin fa-fw"></i> Cargando.. </td>
                </tr>
                <tr ng-repeat="x in solicitudes | filter: filtro | filter:{ tipo: 2 || 3, revisado: 0, estado: '!Rechazado' }" style="text-align: center; vertical-align: middle;">
                  <td style="vertical-align: middle;">
                    <b>{{x.afiliado.nafiliado}}</b> {{x.afiliado.nombre}} {{x.afiliado.apellido}}
                  </td>
                  <td style="vertical-align: middle;">
                    {{x.climed.nombre}}
                  </td>
                  <td style="vertical-align: middle;">
                    {{x.fecha}}
                  </td>
                  <td style="vertical-align: middle;">

                    <button type="button" ng-click="Auditar(x)" class="Boton Primary" data-toggle="modal" data-target="#auditar" style="padding: 2px; width: 100%;"><i class="fa fa-fw fa-eye"></i> Auditar solicitud</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

        </md-content>
      </md-tab>
    </md-tabs>
  </md-content>
</div>

<div class="modal fade" id="auditar" tabindex="-1" style="z-index: 9999999;" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        Auditoría de Solicitud
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      </div>
      <div class="modal-body" style="text-align: center;">
        <form ng-submit="Validar()">
          <center>
            <img src="certificados/{{y.foto}}" width="350px" height="350px" style="margin-top: 5px;">
            <input ng-if="y.tipo == 3" type="text" style="width: 350px; margin-top: 5px; background-color: transparent; border-radius: 0px; color: #337ab7; font-weight: bold;" class="form-control" placeholder="Ingrese el nombre del estudio" required>
          </center>
          <a href="certificados/{{y.foto}}" download="Solicitud-{{y.id}}" target="_blank"><button type="button" style="margin-top: 10px;" class="Boton Brand"><i class="fa fa-download"></i> DESCARGAR IMAGEN</button></a>
          <button type="button" style="margin-top: 10px;" ng-click="Autorizar(y.id)" class="Boton Success"><i class="fa fa-check"></i> VALIDAR SOLICITUD</button>
          <button type="button" style="margin-top: 10px;" ng-click="Rechazar(y.id)" class="Boton Danger"><i class="fa fa-remove"></i> RECHAZAR SOLICITUD</button>
        </form>
      </div>
    </div>
  </div>
</div>

</div>